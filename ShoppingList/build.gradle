apply plugin: 'android'

android {
    compileSdkVersion 19
    buildToolsVersion "19.1.0"

    defaultConfig {
        applicationId "org.openintents.shopping"
        versionName "2.0-rc1"
        minSdkVersion 7
        targetSdkVersion 19

        testApplicationId "org.openintents.shopping.test"
        testInstrumentationRunner "android.test.InstrumentationTestRunner"
    }

    lintOptions {
        abortOnError false
    }


    signingConfigs {
        release {
            Properties props = new Properties()
            props.load(new FileInputStream("$buildDir/../build-private.properties"))

            storeFile file(props.getProperty("key.store"))
            storePassword props.getProperty("key.store.password")
            keyAlias props.getProperty("key.alias")
            keyPassword props.getProperty("key.alias.password")
        }
    }

    productFlavors {
        play {

        }

        tstore {

        }

    }

    buildTypes {
        release {
            runProguard false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.txt'
            signingConfig signingConfigs.release

            applicationVariants.all { variant ->
                def file = variant.outputFile
                variant.outputFile = new File(file.parent, file.name.replace(".apk", "-" + defaultConfig.versionName + ".apk"))
            }
        }
    }
}

dependencies {
    compile project(':ShoppingListLibrary')
    compile 'org.openintents:distribution-lib:1.0.+'
    compile 'com.android.support:appcompat-v7:+'
    compile files('libs/sensorsimulator-lib.jar')
    compile files('libs/OIShoppingListMyBackupPro.jar')
    androidTestCompile 'com.jayway.android.robotium:robotium-solo:4.3.1'
    androidTestCompile 'com.jayway.android.robotium:robotium-solo:3.1'
    androidTestCompile files('libs/polidea_test_runner_1.2.jar')
}
